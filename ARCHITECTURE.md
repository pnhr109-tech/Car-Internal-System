# gigicompanyç¤¾å†…ã‚·ã‚¹ãƒ†ãƒ  ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå**: gigicompany-system  
**ä½œæˆæ—¥**: 2026å¹´2æœˆ13æ—¥  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0

---

## ğŸ“‹ ç›®æ¬¡

1. [ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦](#ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦)
2. [ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ§‹æˆ](#ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ§‹æˆ)
3. [ãƒ“ã‚¸ãƒã‚¹ãƒ•ãƒ­ãƒ¼](#ãƒ“ã‚¸ãƒã‚¹ãƒ•ãƒ­ãƒ¼)
4. [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ](#ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ)
5. [URLè¨­è¨ˆ](#urlè¨­è¨ˆ)
6. [ä»Šå¾Œã®é–‹ç™ºäºˆå®š](#ä»Šå¾Œã®é–‹ç™ºäºˆå®š)

---

## ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

gigicompanyã®æ¥­å‹™ã‚’çµ±åˆç®¡ç†ã™ã‚‹ç¤¾å†…ã‚·ã‚¹ãƒ†ãƒ ã€‚
è»Šè²·å–ãƒ“ã‚¸ãƒã‚¹ã‚’ä¸­å¿ƒã«ã€é¡§å®¢ç®¡ç†ã€å¾“æ¥­å“¡ç®¡ç†ã€å‹¤æ€ ç®¡ç†ã€å–¶æ¥­ç®¡ç†ãªã©ã‚’ä¸€å…ƒåŒ–ã€‚

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **Framework**: Django 5.0.1
- **Database**: MySQL 8.0
- **Frontend**: Bootstrap 5 + Vanilla JavaScript
- **External API**: Gmail API (OAuth 2.0), Google Cloud Pub/Sub

---

## ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ§‹æˆ

### ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
gigicompany-system/
â”œâ”€â”€ config/                      # Djangoãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
â”‚   â”œâ”€â”€ settings.py             # ç’°å¢ƒè¨­å®š
â”‚   â”œâ”€â”€ urls.py                 # ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°çµ±åˆ
â”‚   â””â”€â”€ wsgi.py                 # WSGIã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚
â”œâ”€â”€ core/                        # å…±é€šåŸºç›¤
â”‚   â”œâ”€â”€ models.py               # å…±é€šæŠ½è±¡ãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ mixins.py               # å…±é€šMixin
â”‚   â”œâ”€â”€ utils.py                # å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â””â”€â”€ middleware.py           # ã‚«ã‚¹ã‚¿ãƒ ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
â”‚
â”œâ”€â”€ employees/                   # å¾“æ¥­å“¡ç®¡ç† ğŸ”¨æœªå®Ÿè£…
â”‚   â”œâ”€â”€ models.py               # Employee, Department, Position
â”‚   â”œâ”€â”€ views.py                # å¾“æ¥­å“¡CRUD
â”‚   â”œâ”€â”€ admin.py
â”‚   â””â”€â”€ templates/employees/
â”‚
â”œâ”€â”€ customers/                   # é¡§å®¢ç®¡ç† ğŸ”¨æœªå®Ÿè£…
â”‚   â”œâ”€â”€ models.py               # Customer, Contact
â”‚   â”œâ”€â”€ views.py                # é¡§å®¢æƒ…å ±ç®¡ç†
â”‚   â””â”€â”€ templates/customers/
â”‚
â”œâ”€â”€ leads/                       # æŸ»å®šç”³è¾¼ç®¡ç† âœ…å®Ÿè£…æ¸ˆã¿
â”‚   â”œâ”€â”€ models.py               # Lead, AssessmentRequest
â”‚   â”œâ”€â”€ views.py                # æŸ»å®šç”³è¾¼ä¸€è¦§ãƒ»è©³ç´°
â”‚   â”œâ”€â”€ integrations/           # å¤–éƒ¨é€£æºã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”‚   â”œâ”€â”€ navikuru.py        # ãƒŠãƒ“ã‚¯ãƒ«ï¼ˆGmailè‡ªå‹•å–å¾—ï¼‰
â”‚   â”‚   â””â”€â”€ base.py            # å…±é€šã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚   â”œâ”€â”€ management/commands/    # ã‚³ãƒãƒ³ãƒ‰
â”‚   â”‚   â”œâ”€â”€ fetch_gmail.py     # Gmailå–å¾—
â”‚   â”‚   â”œâ”€â”€ gmail_watch_start.py
â”‚   â”‚   â””â”€â”€ gmail_watch_stop.py
â”‚   â””â”€â”€ templates/leads/
â”‚       â””â”€â”€ assessment_list.html
â”‚
â”œâ”€â”€ sales/                       # æŸ»å®šãƒ»å•†è«‡ç®¡ç† ğŸ”¨æœªå®Ÿè£…
â”‚   â”œâ”€â”€ models.py               # Negotiation, Contract, SalesRecord
â”‚   â”œâ”€â”€ views.py                # æŸ»å®šãƒ»å•†è«‡ãƒ»å¥‘ç´„ãƒ»å£²ä¸Šç®¡ç†
â”‚   â”œâ”€â”€ reports.py              # ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
â”‚   â””â”€â”€ templates/sales/
â”‚
â”œâ”€â”€ vehicles/                    # è»Šä¸¡ç®¡ç† ğŸ”¨æœªå®Ÿè£…
â”‚   â”œâ”€â”€ models.py               # Vehicle, Purchase, Sale, Inventory
â”‚   â”œâ”€â”€ views.py                # åœ¨åº«ç®¡ç†ãƒ»è²·å–å£²å´
â”‚   â””â”€â”€ templates/vehicles/
â”‚
â”œâ”€â”€ attendance/                  # å‹¤æ€ ç®¡ç† ğŸ”¨æœªå®Ÿè£…
â”‚   â”œâ”€â”€ models.py               # AttendanceRecord, Leave, Overtime
â”‚   â”œâ”€â”€ views.py                # æ‰“åˆ»ãƒ»å‹¤æ€ æ‰¿èª
â”‚   â”œâ”€â”€ management/commands/    # æœˆæ¬¡é›†è¨ˆã‚³ãƒãƒ³ãƒ‰
â”‚   â””â”€â”€ templates/attendance/
â”‚
â”œâ”€â”€ dashboard/                   # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ ğŸ”¨æœªå®Ÿè£…
â”‚   â”œâ”€â”€ views.py                # KPIè¡¨ç¤ºãƒ»çµ±è¨ˆ
â”‚   â””â”€â”€ templates/dashboard/
â”‚       â””â”€â”€ index.html          # ç¤¾å†…ã‚·ã‚¹ãƒ†ãƒ TOP
â”‚
â”œâ”€â”€ admin_panel/                 # ç®¡ç†è€…æ©Ÿèƒ½ ğŸ”¨æœªå®Ÿè£…
â”‚   â”œâ”€â”€ views.py                # ã‚·ã‚¹ãƒ†ãƒ è¨­å®šãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
â”‚   â””â”€â”€ templates/admin_panel/
â”‚
â”œâ”€â”€ static/                      # å…±é€šé™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ common.css
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â””â”€â”€ common.js
â”‚   â””â”€â”€ images/
â”‚       â””â”€â”€ logo.png
â”‚
â”œâ”€â”€ templates/                   # å…±é€šãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ base.html               # ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ navigation.html         # ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ 404.html
â”‚   â””â”€â”€ 500.html
â”‚
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .env
â”œâ”€â”€ README.md
â””â”€â”€ ARCHITECTURE.md             # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

---

## ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä¸€è¦§

### åŸºç›¤ç³»

| ã‚¢ãƒ—ãƒª | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | å½¹å‰² | ä¸»ãªãƒ¢ãƒ‡ãƒ« | URL |
|--------|----------|------|-----------|-----|
| **core** | ğŸ”¨æœªå®Ÿè£… | å…±é€šåŸºç›¤ãƒ»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ | BaseModel, TimestampMixin | - |
| **employees** | ğŸ”¨æœªå®Ÿè£… | å¾“æ¥­å“¡ãƒã‚¹ã‚¿ç®¡ç† | Employee, Department, Position | /employees/ |
| **customers** | ğŸ”¨æœªå®Ÿè£… | é¡§å®¢ãƒã‚¹ã‚¿ç®¡ç† | Customer, Contact | /customers/ |
| **dashboard** | ğŸ”¨æœªå®Ÿè£… | çµ±åˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ | - | / |
| **admin_panel** | ğŸ”¨æœªå®Ÿè£… | ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…æ©Ÿèƒ½ | SystemConfig, AuditLog | /admin-panel/ |

### æ¥­å‹™ç³»

| ã‚¢ãƒ—ãƒª | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | å½¹å‰² | ä¸»ãªãƒ¢ãƒ‡ãƒ« | URL |
|--------|----------|------|-----------|-----|
| **leads** | âœ…å®Ÿè£…æ¸ˆã¿ | æŸ»å®šç”³è¾¼ç®¡ç† | Lead, AssessmentRequest | /leads/ |
| **sales** | ğŸ”¨æœªå®Ÿè£… | æŸ»å®šãƒ»å•†è«‡ãƒ»å¥‘ç´„ç®¡ç† | Negotiation, Contract, SalesRecord | /sales/ |
| **vehicles** | ğŸ”¨æœªå®Ÿè£… | è»Šä¸¡ç®¡ç†ï¼ˆè²·å–ãƒ»åœ¨åº«ãƒ»å£²å´ï¼‰ | Vehicle, Purchase, Sale, Inventory | /vehicles/ |
| **attendance** | ğŸ”¨æœªå®Ÿè£… | å‹¤æ€ ç®¡ç† | AttendanceRecord, Leave, Overtime | /attendance/ |

---

## ãƒ“ã‚¸ãƒã‚¹ãƒ•ãƒ­ãƒ¼

### è»Šè²·å–ãƒ“ã‚¸ãƒã‚¹ã®æµã‚Œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚1. æŸ»å®šç”³è¾¼  â”‚  leads/ (æŸ»å®šç”³è¾¼ç®¡ç†)
â”‚ (æ–°è¦ç”³è¾¼)  â”‚  - ãƒŠãƒ“ã‚¯ãƒ«ã‹ã‚‰è‡ªå‹•å–å¾— (Gmail API + Pub/Sub)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  - æ‰‹å‹•ç™»éŒ²
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚2. æŸ»å®šãƒ»å•†è«‡â”‚  sales/ (æŸ»å®šãƒ»å•†è«‡ç®¡ç†)
â”‚ (ç¾åœ°æŸ»å®š)  â”‚  - æŸ»å®šå±¥æ­´ãƒ»å•†è«‡è¨˜éŒ²
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç†ï¼ˆæŸ»å®šä¸­ã€è¦‹ç©æç¤ºã€äº¤æ¸‰ä¸­ãªã©ï¼‰
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. å¥‘ç´„     â”‚  sales/ (å¥‘ç´„ç®¡ç†)
â”‚  (è²·å–å¥‘ç´„) â”‚  - å¥‘ç´„æ›¸ç®¡ç†
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  - å…¥é‡‘ç¢ºèª
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. è²·å–     â”‚  vehicles/ (è»Šä¸¡ç®¡ç†)
â”‚  (åœ¨åº«åŒ–)   â”‚  - è»Šä¸¡æƒ…å ±ç™»éŒ²
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  - åœ¨åº«ç®¡ç†
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. å£²å´     â”‚  vehicles/ (å£²å´ç®¡ç†)
â”‚  (è²©å£²å®Œäº†) â”‚  - è²©å£²è¨˜éŒ²
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  - åˆ©ç›Šè¨ˆç®—
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é¡§å®¢åŒ–      â”‚  customers/ (é¡§å®¢ç®¡ç†)
â”‚  (ãƒªãƒ”ãƒ¼ãƒˆ) â”‚  - é¡§å®¢æƒ…å ±çµ±åˆ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  - æ¬¡å›æŸ»å®šç”³è¾¼ã¸
```

### ãƒ‡ãƒ¼ã‚¿ç§»è¡Œãƒ‘ã‚¿ãƒ¼ãƒ³

**ãƒ‘ã‚¿ãƒ¼ãƒ³1: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°**
- åŒã˜ãƒ†ãƒ¼ãƒ–ãƒ«å†…ã§ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚«ãƒ©ãƒ ã‚’æ›´æ–°
- ä¾‹: Lead.status = 'ç”³è¾¼' â†’ 'å•†è«‡ä¸­' â†’ 'å¥‘ç´„æ¸ˆã¿'

**ãƒ‘ã‚¿ãƒ¼ãƒ³2: ãƒ†ãƒ¼ãƒ–ãƒ«ç§»è¡Œ**
- ã‚¹ãƒ†ãƒ¼ã‚¸ãŒå¤‰ã‚ã£ãŸã‚‰åˆ¥ãƒ†ãƒ¼ãƒ–ãƒ«ã«ç§»å‹•
- ä¾‹: AssessmentRequest â†’ Negotiation â†’ Contract â†’ Vehicle
- é–¢é€£ã‚’å¤–éƒ¨ã‚­ãƒ¼ã§ä¿æŒ: Vehicle.original_lead_id

---

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### ä¸»è¦ãƒ¢ãƒ‡ãƒ«ä¸€è¦§

#### åŸºç›¤ç³»

**Employee (å¾“æ¥­å“¡)**
```python
- id: ä¸»ã‚­ãƒ¼
- user: Djangoãƒ¦ãƒ¼ã‚¶ãƒ¼ (OneToOne: User) â€»ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±
- employee_number: ç¤¾å“¡ç•ªå·
- name: æ°å
- email: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
- department: éƒ¨ç½² (FK)
- position: å½¹è·
- role: æ¨©é™ãƒ¬ãƒ™ãƒ« ('admin', 'manager', 'staff')
- hire_date: å…¥ç¤¾æ—¥
- is_active: åœ¨ç±ãƒ•ãƒ©ã‚°
- created_at: ç™»éŒ²æ—¥æ™‚
```

**User (ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼) - Djangoæ¨™æº– + æ‹¡å¼µ**
```python
- id: ä¸»ã‚­ãƒ¼
- username: ãƒ­ã‚°ã‚¤ãƒ³IDï¼ˆç¤¾å“¡ç•ªå·ã¨åŒã˜ï¼‰
- password: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆãƒãƒƒã‚·ãƒ¥åŒ–ï¼‰
- email: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
- is_staff: ã‚¹ã‚¿ãƒƒãƒ•ãƒ•ãƒ©ã‚°
- is_active: ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ•ãƒ©ã‚°
- groups: æ¨©é™ã‚°ãƒ«ãƒ¼ãƒ— (ManyToMany)
- last_login: æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ—¥æ™‚
```

**Customer (é¡§å®¢)**
```python
- id: ä¸»ã‚­ãƒ¼
- customer_number: é¡§å®¢ç•ªå·
- name: æ°å
- phone: é›»è©±ç•ªå·
- email: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
- address: ä½æ‰€
- created_at: ç™»éŒ²æ—¥
```

#### æ¥­å‹™ç³»

**AssessmentRequest (æŸ»å®šç”³è¾¼) - leads/**
```python
- id: ä¸»ã‚­ãƒ¼
- application_number: ãŠç”³è¾¼ç•ªå·
- application_datetime: ãŠç”³è¾¼æ—¥æ™‚
- customer_name: ãŠåå‰
- phone: é›»è©±ç•ªå·
- email: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
- address: ä½æ‰€
- maker: ãƒ¡ãƒ¼ã‚«ãƒ¼å
- car_model: è»Šç¨®å
- year: å¹´å¼
- mileage: èµ°è¡Œè·é›¢
- source: å–å¾—å…ƒ ('navikuru', 'manual')
- status: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ ('new', 'contacted', 'negotiating', 'contracted', 'canceled')
- assigned_to: æ‹…å½“è€… (FK: Employee)
- created_at: ä½œæˆæ—¥æ™‚
```

**Negotiation (æŸ»å®šãƒ»å•†è«‡) - sales/**
```python
- id: ä¸»ã‚­ãƒ¼
- assessment_request: æŸ»å®šç”³è¾¼ (FK: AssessmentRequest)
- customer: é¡§å®¢ (FK: Customer)
- employee: æ‹…å½“å–¶æ¥­ (FK: Employee)
- status: æŸ»å®šãƒ»å•†è«‡ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ ('scheduled', 'assessed', 'negotiating', 'offer_made', 'closed_won', 'closed_lost')
- assessment_date: æŸ»å®šæ—¥
- assessment_location: æŸ»å®šå ´æ‰€
- estimated_price: æŸ»å®šé¡
- notes: æŸ»å®šãƒ»å•†è«‡ãƒ¡ãƒ¢
- created_at: ä½œæˆæ—¥æ™‚
```

**Vehicle (è»Šä¸¡) - vehicles/**
```python
- id: ä¸»ã‚­ãƒ¼
- vehicle_number: è»Šä¸¡ç®¡ç†ç•ªå·
- original_lead: å…ƒã®æŸ»å®šç”³è¾¼ (FK: AssessmentRequest)
- customer: è²·å–å…ƒé¡§å®¢ (FK: Customer)
- maker: ãƒ¡ãƒ¼ã‚«ãƒ¼ â€»ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã«è‡ªå‹•è¨˜éŒ²
- clock_out: é€€å‹¤æ™‚åˆ» â€»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ™‚ã«è‡ªå‹•è¨˜éŒ²
- break_minutes: ä¼‘æ†©æ™‚é–“ï¼ˆåˆ†ï¼‰
- work_hours: å‹¤å‹™æ™‚é–“ï¼ˆè‡ªå‹•è¨ˆç®—ï¼‰
- overtime_hours: æ®‹æ¥­æ™‚é–“ï¼ˆè‡ªå‹•è¨ˆç®—ï¼‰
- login_based: ãƒ­ã‚°ã‚¤ãƒ³é€£å‹•ãƒ•ãƒ©ã‚° (True/False)
- status: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ ('pending', 'approved', 'rejected')
- approved_by: æ‰¿èªè€… (FK: Employee, nullable)
- approved_at: æ‰¿èªæ—¥æ™‚
- notes: å‚™è€ƒ
- created_at: è¨˜éŒ²æ—¥æ™‚
- updated_at: æ›´æ–°æ—¥æ™‚
```

**ãƒ­ã‚°ã‚¤ãƒ³é€£å‹•ã®ä»•çµ„ã¿:**
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¤ãƒ³ â†’ è‡ªå‹•çš„ã«`clock_in`è¨˜éŒ²
2. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¢ã‚¦ãƒˆ â†’ è‡ªå‹•çš„ã«`clock_out`è¨˜éŒ²
3. `work_hours = clock_out - clock_in - break_minutes`ã‚’è‡ªå‹•è¨ˆç®—
4. æ‰€å®šåŠ´åƒæ™‚é–“ï¼ˆ8æ™‚é–“ï¼‰ã‚’è¶…ãˆãŸåˆ†ã‚’`overtime_hours`ã¨ã—ã¦è¨˜éŒ²urchased_at: è²·å–æ—¥
- sold_at: å£²å´æ—¥
```

**AttendanceRecord (å‹¤æ€ è¨˜éŒ²) - attendance/**
```python
- id: ä¸»ã‚­ãƒ¼
- employee: å¾“æ¥­å“¡ (FK: Employee)
- date: å‹¤å‹™æ—¥
- clock_in: å‡ºå‹¤æ™‚åˆ»
- clock_out: é€€å‹¤æ™‚åˆ»â€»ãƒ­ã‚°ã‚¤ãƒ³å¾Œ
/login/                        # ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢
/logout/                       # ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
/admin/                        # Djangoç®¡ç†ç”»é¢

# åŸºç›¤ç³»
/employees/                    # å¾“æ¥­å“¡ä¸€è¦§ï¼ˆç®¡ç†è€…ã®ã¿ï¼‰
/employees/<id>/               # å¾“æ¥­å“¡è©³ç´°ï¼ˆç®¡ç†è€…ã®ã¿ï¼‰
/employees/me/                 # è‡ªåˆ†ã®æƒ…å ±ï¼ˆå…¨å“¡ï¼‰
/customers/                    # é¡§å®¢ä¸€è¦§ï¼ˆç®¡ç†è€…ãƒ»ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ï¼‰
/customers/<id>/               # é¡§å®¢è©³ç´°

# æ¥­å‹™ç³» - æŸ»å®šç”³è¾¼ç®¡ç†
/leads/                        # æŸ»å®šç”³è¾¼ä¸€è¦§ï¼ˆå…¨å“¡ï¼‰
/leads/<id>/                   # æŸ»å®šç”³è¾¼è©³ç´°
/leads/create/                 # æ‰‹å‹•ç™»éŒ²
/leads/my/                     # è‡ªåˆ†ã®æ‹…å½“æŸ»å®šç”³è¾¼ï¼ˆä¸€èˆ¬ï¼‰

# æ¥­å‹™ç³» - æŸ»å®šãƒ»å•†è«‡ç®¡ç†
/sales/                        # æŸ»å®šãƒ»å•†è«‡ç®¡ç†TOPï¼ˆå…¨å“¡ï¼‰
/sales/negotiations/           # æŸ»å®šãƒ»å•†è«‡ä¸€è¦§
/sales/negotiations/<id>/      # æŸ»å®šãƒ»å•†è«‡è©³ç´°
/sales/contracts/              # å¥‘ç´„ä¸€è¦§
/sales/contracts/<id>/         # å¥‘ç´„è©³ç´°
/sales/reports/                # å–¶æ¥­ãƒ¬ãƒãƒ¼ãƒˆï¼ˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ä»¥ä¸Šï¼‰
/sales/my/                     # è‡ªåˆ†ã®å–¶æ¥­å®Ÿç¸¾ï¼ˆä¸€èˆ¬ï¼‰

# æ¥­å‹™ç³» - è»Šä¸¡ç®¡ç†
/vehicles/                     # è»Šä¸¡ç®¡ç†TOPï¼ˆå…¨å“¡ï¼‰
/vehicles/inventory/           # åœ¨åº«ä¸€è¦§
/vehicles/<id>/                # è»Šä¸¡è©³ç´°
/vehicles/purchase/            # è²·å–ç™»éŒ²
/vehicles/sale/<id>/           # å£²å´ç™»éŒ²

# æ¥­å‹™ç³» - å‹¤æ€ ç®¡ç†
/attendance/                   # å‹¤æ€ ç®¡ç†TOPï¼ˆå…¨å“¡ï¼‰
/attendance/me/                # è‡ªåˆ†ã®å‹¤æ€ ï¼ˆå…¨å“¡ï¼‰
/attendance/list/              # å‹¤æ€ ä¸€è¦§ï¼ˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ä»¥ä¸Šï¼‰
/attendance/approve/           # æ‰¿èªç”»é¢ï¼ˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ä»¥ä¸Šï¼‰
/attendance/report/            # å‹¤æ€ ãƒ¬ãƒãƒ¼ãƒˆï¼ˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ä»¥ä¸Šï¼‰

# ç®¡ç†è€…æ©Ÿèƒ½
/admin-panel/                  # ç®¡ç†è€…TOPï¼ˆç®¡ç†è€…ã®ã¿ï¼‰
/admin-panel/users/            # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
/admin-panel/permissions/      # æ¨©é™
/vehicles/sale/<id>/           # å£²å´ç™»éŒ²

# æ¥­å‹™ç³» - å‹¤æ€ ç®¡ç†
/attendance/                   # å‹¤æ€ ç®¡ç†TOP
/attendance/record/            # æ‰“åˆ»ï¼ˆå‡ºé€€å‹¤ï¼‰
/attendance/list/              # å‹¤æ€ ä¸€è¦§
/attendance/approve/           # æ‰¿èªç”»é¢ï¼ˆç®¡ç†è€…ï¼‰
/attendance/report/            # å‹¤æ€ ãƒ¬ãƒãƒ¼ãƒˆ

# ç®¡ç†è€…æ©Ÿèƒ½
/admin-panel/                  # ç®¡ç†è€…TOP
/admin-panel/users/            # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
/admin-panel/settings/         # ã‚·ã‚¹ãƒ†ãƒ è¨­å®š
/admin-panel/audit-log/        # æ“ä½œãƒ­ã‚°
```

---

## æŠ€è¡“ä»•æ§˜

### Gmail APIé€£æº (Pub/Sub Pushé€šçŸ¥)

**å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½:**
- Gmail Pub/Sub Pushé€šçŸ¥ã«ã‚ˆã‚‹æ–°ç€ãƒ¡ãƒ¼ãƒ«æ¤œçŸ¥
- ngrokã‚’ä½¿ç”¨ã—ãŸãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã§ã®Webhookå—ä¿¡
- è‡ªå‹•çš„ãªæŸ»å®šç”³è¾¼ãƒ‡ãƒ¼ã‚¿ã®ãƒ‘ãƒ¼ã‚¹ãƒ»DBä¿å­˜

**è¨­å®š:**
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: `your-project-id`
- Pub/Subãƒˆãƒ”ãƒƒã‚¯: `projects/your-project-id/topics/gmail-push`
- Watchæœ‰åŠ¹æœŸé™: 7æ—¥é–“ï¼ˆå®šæœŸçš„ãªæ›´æ–°ãŒå¿…è¦ï¼‰

**ç®¡ç†ã‚³ãƒãƒ³ãƒ‰:**
```bash
# Gmail Watché–‹å§‹
python manage.py gmail_watch_start --topic projects/your-project-id/topics/gmail-push

# Gmail Watchåœæ­¢
python manage.py gmail_watch_stop

# æ‰‹å‹•ãƒ¡ãƒ¼ãƒ«å–å¾—
python manage.py fetch_gmail --days 7 --max 100
```

### èªè¨¼ãƒ»èªå¯

**èªè¨¼ã‚·ã‚¹ãƒ†ãƒ :**
- Djangoæ¨™æº–èªè¨¼ + ã‚«ã‚¹ã‚¿ãƒ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ‡ãƒ«
- ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½
- **ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã«è‡ªå‹•çš„ã«å‡ºå‹¤æ‰“åˆ»ã€ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ™‚ã«é€€å‹¤æ‰“åˆ»**
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ï¼ˆè‡ªå‹•ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ: 8æ™‚é–“ï¼‰

**æ¨©é™ãƒ¬ãƒ™ãƒ«:**

| æ¨©é™ãƒ¬ãƒ™ãƒ« | å½¹å‰² | ã‚¢ã‚¯ã‚»ã‚¹ç¯„å›² |
|-----------|------|--------------|
| **ä»£è¡¨å–ç· å½¹ (admin)** | ç®¡ç†è€…ãƒ»ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€… | å…¨æ©Ÿèƒ½ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ |
| **å½¹è·è€… (manager)** | éƒ¨é–€é•·ãƒ»ç®¡ç†è· | æ‰¿èªæ©Ÿèƒ½ã€ãƒ¬ãƒãƒ¼ãƒˆé–²è¦§ã€è‡ªéƒ¨é–€ç·¨é›† |
| **ä¸€èˆ¬ (staff)** | ä¸€èˆ¬å¾“æ¥­å“¡ãƒ»å–¶æ¥­æ‹…å½“è€… | å–¶æ¥­ç³»æ©Ÿèƒ½ã€è‡ªåˆ†ã®æ‹…å½“ã®ã¿ç·¨é›†ã€å‹¤æ€ å…¥åŠ›ã€è‡ªåˆ†ã®æƒ…å ±é–²è¦§ã®ã¿ |

**ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ãƒãƒˆãƒªã‚¯ã‚¹:**

| æ©Ÿèƒ½ | admin | manager | staff |
|------|-------|---------|-------|
| **å¾“æ¥­å“¡ç®¡ç†** | âœ… å…¨ã¦ | âœ… é–²è¦§ã®ã¿ | âŒ |
| **é¡§å®¢ç®¡ç†** | âœ… å…¨ã¦ | âœ… é–²è¦§ãƒ»ç·¨é›† | âœ… é–²è¦§ã®ã¿ |
| **æŸ»å®šç”³è¾¼ç®¡ç†** | âœ… å…¨ã¦ | âœ… å…¨ã¦ | âœ… è‡ªåˆ†ã®æ‹…å½“ã®ã¿ |
| **æŸ»å®šãƒ»å•†è«‡ç®¡ç†** | âœ… å…¨ã¦ | âœ… å…¨ã¦ | âœ… è‡ªåˆ†ã®æ‹…å½“ã®ã¿ |
| **è»Šä¸¡ç®¡ç†** | âœ… å…¨ã¦ | âœ… å…¨ã¦ | âœ… é–²è¦§ãƒ»ç·¨é›†å¯ |
| **å‹¤æ€ ç®¡ç†** | âœ… å…¨ã¦ | âœ… æ‰¿èªæ¨©é™ã‚ã‚Š | âœ… è‡ªåˆ†ã®ã¿ |
| **ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰** | âœ… å…¨ãƒ‡ãƒ¼ã‚¿ | âœ… è‡ªéƒ¨é–€ãƒ‡ãƒ¼ã‚¿ | âœ… è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ |
| **ç®¡ç†è€…æ©Ÿèƒ½** | âœ… å…¨ã¦ | âŒ | âŒ |
- [ ] ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½
- [ ] æ¨©é™ã‚°ãƒ«ãƒ¼ãƒ—è¨­å®šï¼ˆadmin/manager/staffï¼‰
- [ ] ãƒ­ã‚°ã‚¤ãƒ³é€£å‹•ã®å‹¤æ€ è‡ªå‹•è¨˜éŒ²
- [ ] ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ï¼ˆãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãƒ»ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ï¼‰
- [ ] employeesã‚¢ãƒ—ãƒªå®Ÿè£…ï¼ˆå¾“æ¥­å“¡ç®¡ç†ï¼‰

### Phase 3: æŸ»å®šãƒ»å•†è«‡ç®¡ç†
- [ ] salesã‚¢ãƒ—ãƒªå®Ÿè£…ï¼ˆæŸ»å®šãƒ»å•†è«‡ãƒ»å¥‘ç´„ç®¡ç†ï¼‰
- [ ] æŸ»å®šç”³è¾¼ã‹ã‚‰æŸ»å®šãƒ»å•†è«‡ã¸ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é·ç§»
- [ ] æŸ»å®šãƒ»å–¶æ¥­ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½
- [ ] æ¨©é™ã«ã‚ˆã‚‹è¡¨ç¤ºåˆ¶å¾¡ï¼ˆè‡ªåˆ†ã®æ‹…å½“ã®ã¿/å…¨ã¦ï¼‰

### Phase 4: è»Šä¸¡ç®¡ç†
- [ ] vehiclesã‚¢ãƒ—ãƒªå®Ÿè£…ï¼ˆåœ¨åº«ç®¡ç†ï¼‰
- [ ] è²·å–ãƒ»å£²å´ãƒ•ãƒ­ãƒ¼
- [ ] åˆ©ç›Šè¨ˆç®—æ©Ÿèƒ½

### Phase 5: äººäº‹ãƒ»å‹¤æ€ 
- [ ] attendanceã‚¢ãƒ—ãƒªå®Ÿè£…ï¼ˆå‹¤æ€ ç®¡ç†ï¼‰
- [ ] å‹¤æ€ æ‰¿èªãƒ•ãƒ­ãƒ¼ï¼ˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼æ¨©é™ï¼‰
- [ ] æœˆæ¬¡é›†è¨ˆãƒ»ãƒ¬ãƒãƒ¼ãƒˆ
- [ ] çµ¦ä¸è¨ˆç®—é€£æºæº–å‚™

### Phase 6: é¡§å®¢ç®¡ç†ãƒ»ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- [ ] customersã‚¢ãƒ—ãƒªå®Ÿè£…
- [ ] dashboardã‚¢ãƒ—ãƒªå®Ÿè£…ï¼ˆKPIè¡¨ç¤ºï¼‰
- [ ] æ¨©é™åˆ¥ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆadmin/manager/staffï¼‰
- [ ] ãƒ¬ãƒãƒ¼ãƒˆè‡ªå‹•ç”Ÿæˆ

### Phase 7: ç®¡ç†è€…æ©Ÿèƒ½
- [ ] admin_panelã‚¢ãƒ—ãƒªå®Ÿè£…
- [ ] æ“ä½œãƒ­ã‚°ãƒ»ç›£æŸ»æ©Ÿèƒ½
- [ ] ã‚·ã‚¹ãƒ†ãƒ è¨­å®šç”»é¢
- [ ] æ¨©é™ç®¡ç† è»Šä¸¡ç®¡ç†
- [ ] vehiclesã‚¢ãƒ—ãƒªå®Ÿè£…ï¼ˆåœ¨åº«ç®¡ç†ï¼‰
- [ ] è²·å–ãƒ»å£²å´ãƒ•ãƒ­ãƒ¼
- [ ] åˆ©ç›Šè¨ˆç®—æ©Ÿèƒ½

### Phase 4: äººäº‹ãƒ»å‹¤æ€ 
- [ ] employeesã‚¢ãƒ—ãƒªå®Ÿè£…ï¼ˆå¾“æ¥­å“¡ç®¡ç†ï¼‰
- [ ] attendanceã‚¢ãƒ—ãƒªå®Ÿè£…ï¼ˆå‹¤æ€ ç®¡ç†ï¼‰
- [ ] çµ¦ä¸è¨ˆç®—é€£æº

### Phase 5: é¡§å®¢ç®¡ç†ãƒ»ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- [ ] customersã‚¢ãƒ—ãƒªå®Ÿè£…
- [ ] dashboardã‚¢ãƒ—ãƒªå®Ÿè£…ï¼ˆKPIè¡¨ç¤ºï¼‰
- [ ] ãƒ¬ãƒãƒ¼ãƒˆè‡ªå‹•ç”Ÿæˆ

### Phase 6: ç®¡ç†è€…æ©Ÿèƒ½
- [ ] admin_panelã‚¢ãƒ—ãƒªå®Ÿè£…
- [ ] æ“ä½œãƒ­ã‚°ãƒ»ç›£æŸ»æ©Ÿèƒ½
- [ ] ã‚·ã‚¹ãƒ†ãƒ è¨­å®šç”»é¢

---

## é–‹ç™ºãƒ«ãƒ¼ãƒ«

### ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
- PEP 8æº–æ‹ 
- æ—¥æœ¬èªã‚³ãƒ¡ãƒ³ãƒˆæ¨å¥¨
- ã‚¯ãƒ©ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼å„ªå…ˆ

### Gité‹ç”¨
- main: æœ¬ç•ªç’°å¢ƒ
- develop: é–‹ç™ºç’°å¢ƒ
- feature/xxx: æ©Ÿèƒ½é–‹ç™ºãƒ–ãƒ©ãƒ³ãƒ

### ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
- ãƒ¬ãƒ“ãƒ¥ãƒ¼å¿…é ˆ
- ãƒ†ã‚¹ãƒˆå®Ÿæ–½æ¸ˆã¿ã§ã‚ã‚‹ã“ã¨

---

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [README.md](README.md) - ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †ãƒ»é‹ç”¨æ‰‹é †
- [GMAIL_PUSH_SETUP.md](GMAIL_PUSH_SETUP.md) - Gmail Pushé€šçŸ¥è¨­å®š
- [OAUTH_SETUP.md](OAUTH_SETUP.md) - OAuthèªè¨¼è¨­å®š
- [GMAIL_API_SETUP.md](GMAIL_API_SETUP.md) - Gmail APIè¨­å®šï¼ˆDWDæ–¹å¼ï¼‰

---

**æ›´æ–°å±¥æ­´:**
- 2026-02-13: åˆç‰ˆä½œæˆ
